  general:
    artifacts:
      - ./app/build/outputs/apk/

  machine:
    environment:
      ANDROID_HOME: /usr/local/android-sdk-linux

  dependencies:
    cache_directories:
      - ~/.android
      - ~/android

    override:
      - source scripts/environmentSetup.sh && getAndroidSDK

  test:
    override:
      # start the emulator
      - emulator -avd circleci-android22 -no-audio -no-window:
          background: true
          parallel: true

    #- ./gradlew connectedAndroidTest:

      # wait for it to have booted
      - circle-android wait-for-boot
        timeout: 360
